var Garchive=function(e){"use strict";const t=e=>`${window.JUSTY_CONFIG.DIRS.root}/${e}`;function r(...e){const t=document.createElement("div");return t.append(...e),t}function a(...e){const t=document.createElement("div");return t.classList.add(...e),t}var n={timeline:"gar_tJfy","timeline-header":"gar_3fnH",loading:"gar_9gOp",circle:"gar_gXC5","timeline-body":"gar_vO3D","timeline-item":"gar_cMYL"};!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}('.gar_tJfy{padding:1em 1em 1em 5em}.gar_3fnH{background:var(--color);border-radius:50px;color:#fff;font-size:13px;font-weight:700;line-height:1;margin-left:-3.5em;padding:.4em;position:relative;text-align:center;width:7em}.gar_3fnH.gar_9gOp{pointer-events:none}.gar_3fnH.gar_9gOp:after{animation:gar_gXC5 1s linear infinite;border:3px solid #fff;border-radius:50%;border-top-color:transparent;content:"";height:1em;position:absolute;width:1em}.gar_vO3D{margin:0}.gar_cMYL{align-items:center;border-left:2px solid var(--color);color:#fff;display:flex;padding:.375em .375em .375em 14px;position:relative}.gar_cMYL:first-child{padding-top:.7em}.gar_cMYL:last-child{padding-bottom:1.6em}.gar_cMYL>a{background:var(--color);border-radius:.25em;padding:.875em}.gar_cMYL>a:before{background:var(--gmc-second);border:3px solid var(--color);border-radius:50%;content:"";height:12px;left:-7px;position:absolute;top:1.7em;transition:all .3s;width:12px}.gar_cMYL>a:hover{color:inherit}.gar_cMYL>a:hover:before{background:var(--color)}.gar_cMYL>span{color:var(--gmc-heavy);font-size:13px;font-weight:600;left:-3em;position:absolute}@keyframes gar_gXC5{0%{transform:rotate(0)}to{transform:rotate(1turn)}}');const o=e.http,i=["var(--gmc-danger)","var(--gmc-success)","var(--gmc-warning)","var(--gmc-info)","var(--gmc-secondary)"],c=e.Gmal;function s(e){const t=a(n["timeline-header"]);return t.innerHTML=e,t}return async function l(d){const g=document.querySelector("#archive");if(!g)return;const m=await async function(r){let a=e.Cache.get(`posts-${r||1}`);a||(a=await o.get(t(`api/posts/${r||1}.json`)),e.Cache.set(`posts-${r||1}`,a));const n={};return a.data.forEach((e=>{const t=new Date(e.date),r=`${t.getFullYear()}年${t.getMonth()+1}月`,a=t.getDate();n[r]||(n[r]=[]),n[r].push({day:a,title:e.title,link:e.link})})),{archive:n,currentPage:a.page,totalPage:a.totalPage}}(d),p=m.archive,f=Object.keys(p),h=a(n.timeline);if(h.style.animation="slidein .3s ease-in",1===m.currentPage){const e=s("未完待续..."),t=a(n["timeline-body"]),o=a(n["timeline-item"]);o.style.height="3em",t.append(o);const i=r(e,t);i.style.setProperty("--color","var(--gmc-hl)"),h.append(i)}else if(m.currentPage<m.totalPage){const e=s("上一页");e.style.cursor="pointer",e.onclick=()=>{e.classList.add(n.loading),l(m.currentPage-1).catch((()=>{c.message("网络错误，请稍后重试","error"),e.classList.remove(n.loading)}))};const t=a(n["timeline-body"]),o=a(n["timeline-item"]);o.style.height="3em",t.append(o);const i=r(e,t);i.style.setProperty("--color","var(--gmc-hl)"),h.append(i)}if(f.forEach(((e,t)=>{const o=s(e),c=a(n["timeline-body"]);let l=0;p[e].forEach((e=>{const t=a(n["timeline-item"]);t.innerHTML=`${e.day===l?"":`<span>${e.day}日</span>`}<a href="${e.link}">${e.title}</a>`,c.append(t),l=e.day}));const d=r(o,c);d.style.setProperty("--color",i[t%i.length]),h.append(d)})),m.currentPage===m.totalPage){const e=r(s("梦开始的地方"));e.style.setProperty("--color","var(--gmc-hl)"),h.append(e)}else{const e=s("下一页"),t=r(e);t.style.setProperty("--color","var(--gmc-hl)"),h.append(t),e.style.cursor="pointer",e.onclick=()=>{e.classList.add(n.loading),l(m.currentPage+1).catch((()=>{c.message("网络错误，请稍后重试","error"),e.classList.remove(n.loading)}))}}g.innerHTML="",g.append(h)}}(BlogUtils);
